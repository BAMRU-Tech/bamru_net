(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document)})}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window}
if(!$||!$.fn.dataTable){$=require('datatables.net')(root,$).$}
return factory($,root,root.document)}}
else{factory(jQuery,window,document)}})(function($,window,document,undefined){'use strict';var DataTable=$.fn.dataTable;var _instance=0;var altEditor=function(dt,opts){if(!DataTable.versionCheck||!DataTable.versionCheck('1.10.8')){throw("Warning: altEditor requires DataTables 1.10.8 or greater")}
this.c=$.extend(!0,{},DataTable.defaults.altEditor,altEditor.defaults,opts);this.s={dt:new DataTable.Api(dt),namespace:'.altEditor'+(_instance++)};this.dom={modal:$('<div class="dt-altEditor-handle"/>'),};this._constructor()}
$.extend(altEditor.prototype,{_constructor:function(){var that=this;var dt=this.s.dt;if(dt.settings()[0].oInit.onAddRow)
that.onAddRow=dt.settings()[0].oInit.onAddRow;if(dt.settings()[0].oInit.onDeleteRow)
that.onDeleteRow=dt.settings()[0].oInit.onDeleteRow;if(dt.settings()[0].oInit.onEditRow)
that.onEditRow=dt.settings()[0].oInit.onEditRow;this._setup();dt.on('destroy.altEditor',function(){dt.off('.altEditor');$(dt.table().body()).off(that.s.namespace);$(document.body).off(that.s.namespace)})},_setup:function(){var that=this;var dt=this.s.dt;var modal='<div class="modal fade" id="altEditor-modal" tabindex="-1" role="dialog">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<h4 style="padding-top: 1rem;padding-left: 1rem;" class="modal-title"></h4>'+'<button style="margin: initial;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'</div>'+'<div class="modal-body">'+'<p></p>'+'</div>'+'<div class="modal-footer">'+'<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'+'<input type="submit" form="altEditor-form" class="btn btn-primary"></input>'+'</div>'+'</div>'+'</div>'+'</div>';$('body').append(modal);if(dt.button('edit:name')){dt.button('edit:name').action(function(e,dt,node,config){that._openEditModal()});$(document).on('click','#editRowBtn',function(e){if(that._inputValidation()){e.preventDefault();e.stopPropagation();that._editRowData()}})}
if(dt.button('delete:name')){dt.button('delete:name').action(function(e,dt,node,config){that._openDeleteModal()});$(document).on('click','#deleteRowBtn',function(e){e.preventDefault();e.stopPropagation();that._deleteRow();$(this).prop('disabled',!0)})}
if(dt.button('add:name')){dt.button('add:name').action(function(e,dt,node,config){that._openAddModal()});$(document).on('click','#addRowBtn',function(e){if(that._inputValidation()){e.preventDefault();e.stopPropagation();that._addRowData()}})}
if(this.s.dt.button('refresh:name')){this.s.dt.button('refresh:name').action(function(e,dt,node,config){if(dt.ajax&&dt.ajax.url()){dt.ajax.reload()}})}},_emitEvent:function(name,args){this.s.dt.iterator('table',function(ctx,i){$(ctx.nTable).triggerHandler(name+'.dt',args)})},_openEditModal:function(){var that=this;var dt=this.s.dt;var columnDefs=[];for(var i in dt.context[0].aoColumns){var obj=dt.context[0].aoColumns[i];columnDefs[i]={title:obj.sTitle,name:obj.data?obj.data:obj.mData,type:(obj.type?obj.type:'text'),options:(obj.options?obj.options:[]),msg:(obj.errorMsg?obj.errorMsg:''),hoverMsg:(obj.hoverMsg?obj.hoverMsg:''),pattern:(obj.pattern?obj.pattern:'.*'),special:(obj.special?obj.special:''),unique:(obj.unique?obj.unique:!1),uniqueMsg:(obj.uniqueMsg?obj.uniqueMsg:''),maxLength:(obj.maxLength?obj.maxLength:!1),multiple:(obj.multiple?obj.multiple:!1),select2:(obj.select2?obj.select2:!1)}}
var adata=dt.rows({selected:!0});var data="";data+="<form name='altEditor-form' role='form'>";data+='<input type="hidden" id="tblId" value="'+dt.table().node().id+'">';for(var j in columnDefs){if(columnDefs[j].type.includes("hidden")){data+="<input type='hidden' id='"+columnDefs[j].name+"' value='"+adata.data()[0][columnDefs[j].name]+"'></input>"}
else{data+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'>"
data+="<div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'>"
data+="<label for='"+columnDefs[j].title+"'>"+columnDefs[j].title+":</label></div>"
data+="<div class='col-sm-8 col-md-8 col-lg-8'>";if(columnDefs[j].type.includes("text")){data+="<input type='"+that._quoteattr(columnDefs[j].type)+"' id='"+that._quoteattr(columnDefs[j].name)+"'  pattern='"+that._quoteattr(columnDefs[j].pattern)+"'  title='"+that._quoteattr(columnDefs[j].hoverMsg)+"' name='"+that._quoteattr(columnDefs[j].title)+"' placeholder='"+that._quoteattr(columnDefs[j].title)+"' data-special='"+that._quoteattr(columnDefs[j].special)+"' data-errorMsg='"+that._quoteattr(columnDefs[j].msg)+"' data-uniqueMsg='"+that._quoteattr(columnDefs[j].uniqueMsg)+"' data-unique='"+columnDefs[j].unique+"'"+(columnDefs[j].maxLength==!1?"":" maxlength='"+columnDefs[j].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value='"+that._quoteattr(adata.data()[0][columnDefs[j].name])+"'>";data+="<label id='"+columnDefs[j].name+"label"+"' class='errorLabel'></label>"}
if(columnDefs[j].type.includes("readonly")){data+="<input type='text' readonly  id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' placeholder='"+columnDefs[j].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+adata.data()[0][columnDefs[j].name]+"'>"}
if(columnDefs[j].type.includes("date")){data+="<input type='date'  id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' placeholder='"+columnDefs[j].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+adata.data()[0][columnDefs[j].name]+"'>"}
if(columnDefs[j].type.includes("time")){data+="<input type='time'  id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' placeholder='"+columnDefs[j].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+adata.data()[0][columnDefs[j].name]+"'>"}
if(columnDefs[j].type.includes("select")){var options="";for(var i=0;i<columnDefs[j].options.length;i++){if(adata.data()[0][columnDefs[j].name]==columnDefs[j].options[i]){options+="<option value='"+columnDefs[j].options[i]+"'selected>"+columnDefs[j].options[i]+"</option>"}else{options+="<option value='"+columnDefs[j].options[i]+"'>"+columnDefs[j].options[i]+"</option>"}}
data+="<select class='form-control"+(columnDefs[j].select2?' select2':'')+"' id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' "+(columnDefs[j].multiple?'multiple':'')+">"+options+"</select>"}
data+="</div><div style='clear:both;'></div></div>"}}
data+="</form>";$('#altEditor-modal').on('show.bs.modal',function(){var btns='<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button>'+'<button type="button" data-content="remove" class="btn btn-primary" id="editRowBtn">Update</button>';$('#altEditor-modal').find('.modal-title').html('Edit Record');$('#altEditor-modal').find('.modal-body').html(data);$('#altEditor-modal').find('.modal-footer').html(btns)});$('#altEditor-modal').modal('show');$('#altEditor-modal input[0]').focus();for(var j in columnDefs){if(columnDefs[j].select2){$("#altEditor-modal").find("select#"+columnDefs[j].name).select2(columnDefs[j].select2)}}},_editRowData:function(){var that=this;var dt=this.s.dt;var rowDataArray={};var adata=dt.rows({selected:!0});$('form[name="altEditor-form"] *').filter(':input').each(function(i){rowDataArray[$(this).attr('id')]=$(this).val()});var assocTbl=that.s.dt.table().node().id;if(rowDataArray.tblId==assocTbl){that.onEditRow(that,rowDataArray,function(data,b,c,d,e){that._editRowCallback(data,b,c,d,e)},function(data){that._errorCallback(data)})}},_openDeleteModal:function(){var that=this;var dt=this.s.dt;var columnDefs=[];for(var i in dt.context[0].aoColumns){columnDefs.push({title:dt.context[0].aoColumns[i].sTitle,type:(dt.context[0].aoColumns[i].type?dt.context[0].aoColumns[i].type:'text'),name:dt.context[0].aoColumns[i].data?dt.context[0].aoColumns[i].data:dt.context[0].aoColumns[i].mData})}
var adata=dt.rows({selected:!0});var data="";data+="<form name='altEditor-form' role='form'>";data+='<input type="hidden" id="tblId" value="'+dt.table().node().id+'">';for(var j in columnDefs){if(columnDefs[j].type.includes("hidden")){data+="<input type='hidden' id='"+columnDefs[j].title+"' value='"+adata.data()[0][columnDefs[j].name]+"'></input>"}
else{data+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><label for='"+that._quoteattr(columnDefs[j].title)+"'>"+columnDefs[j].title+":  </label> <input  type='hidden'  id='"+that._quoteattr(columnDefs[j].title)+"' name='"+that._quoteattr(columnDefs[j].title)+"' placeholder='"+that._quoteattr(columnDefs[j].title)+"' style='overflow:hidden'  class='form-control' value='"+that._quoteattr(adata.data()[0][columnDefs[j].name])+"' >"+adata.data()[0][columnDefs[j].name]+"</input></div>"}}
data+="</form>";$('#altEditor-modal').on('show.bs.modal',function(){var btns='<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button>'+'<button type="button"  data-content="remove" class="btn btn-danger" id="deleteRowBtn">Delete</button>';$('#altEditor-modal').find('.modal-title').html('Delete Record');$('#altEditor-modal').find('.modal-body').html(data);$('#altEditor-modal').find('.modal-footer').html(btns)});$('#altEditor-modal').modal('show');$('#altEditor-modal input[0]').focus()},_deleteRow:function(){var that=this;var dt=this.s.dt;var jsonDataArray={};var adata=dt.rows({selected:!0});var rowDataArray={};$('form[name="altEditor-form"] *').filter(':input').each(function(i){rowDataArray[$(this).attr('id')]=$(this).val()});var assocTbl=that.s.dt.table().node().id;if(rowDataArray.tblId==assocTbl){for(var i=0;i<dt.context[0].aoColumns.length;i++){jsonDataArray[dt.context[0].aoColumns[i].idx]=adata.data()[0][dt.context[0].aoColumns[i].data]}
that.onDeleteRow(that,jsonDataArray,function(data){that._deleteRowCallback(data)},function(data){that._errorCallback(data)})}},_openAddModal:function(){var that=this;var dt=this.s.dt;var columnDefs=[];for(var i in dt.context[0].aoColumns){var obj=dt.context[0].aoColumns[i];columnDefs[i]={title:obj.sTitle,name:(obj.data?obj.data:obj.mData),type:(obj.type?obj.type:'text'),options:(obj.options?obj.options:[]),msg:(obj.errorMsg?obj.errorMsg:''),hoverMsg:(obj.hoverMsg?obj.hoverMsg:''),pattern:(obj.pattern?obj.pattern:'.*'),special:(obj.special?obj.special:''),unique:(obj.unique?obj.unique:!1),uniqueMsg:(obj.uniqueMsg?obj.uniqueMsg:''),maxLength:(obj.maxLength?obj.maxLength:!1),multiple:(obj.multiple?obj.multiple:!1),select2:(obj.select2?obj.select2:!1)}}
var data="";data+="<form name='altEditor-form' role='form'>";data+='<input type="hidden" id="tblId" value="'+dt.table().node().id+'">';for(var j in columnDefs){if(columnDefs[j].type.includes("hidden")){}
else{data+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'><label for='"+columnDefs[j].title+"'>"+columnDefs[j].title+":</label></div><div class='col-sm-8 col-md-8 col-lg-8'>";if(columnDefs[j].type.includes("text")){data+="<input type='"+that._quoteattr(columnDefs[j].type)+"' id='"+that._quoteattr(columnDefs[j].name)+"'  pattern='"+that._quoteattr(columnDefs[j].pattern)+"'  title='"+that._quoteattr(columnDefs[j].hoverMsg)+"' name='"+that._quoteattr(columnDefs[j].title)+"' placeholder='"+that._quoteattr(columnDefs[j].title)+"' data-special='"+columnDefs[j].special+"' data-errorMsg='"+that._quoteattr(columnDefs[j].msg)+"' data-uniqueMsg='"+that._quoteattr(columnDefs[j].uniqueMsg)+"' data-unique='"+columnDefs[j].unique+"'"+(columnDefs[j].maxLength==!1?"":" maxlength='"+columnDefs[j].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value=''>";data+="<label id='"+that._quoteattr(columnDefs[j].name)+"label"+"' class='errorLabel'></label>"}
if(columnDefs[j].type.includes("readonly")){data+="<input type='text' readonly  id='"+that._quoteattr(columnDefs[j].name)+"' name='"+that._quoteattr(columnDefs[j].title)+"' placeholder='"+that._quoteattr(columnDefs[j].title)+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"}
if(columnDefs[j].type.includes("date")){data+="<input type='date'  id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' placeholder='"+columnDefs[j].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"}
if(columnDefs[j].type.includes("time")){data+="<input type='time'  id='"+columnDefs[j].name+"' name='"+columnDefs[j].title+"' placeholder='"+columnDefs[j].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"}
if(columnDefs[j].type.includes("select")){var options="";for(var i=0;i<columnDefs[j].options.length;i++){options+="<option value='"+that._quoteattr(columnDefs[j].options[i])+"'>"+columnDefs[j].options[i]+"</option>"}
data+="<select class='form-control"+(columnDefs[j].select2?' select2':'')+"' id='"+that._quoteattr(columnDefs[j].name)+"' name='"+that._quoteattr(columnDefs[j].title)+"' "+(columnDefs[j].multiple?'multiple':'')+">"+options+"</select>"}
data+="</div><div style='clear:both;'></div></div>"}}
data+="</form>";$('#altEditor-modal').on('show.bs.modal',function(){var btns='<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button>'+'<button type="button"  data-content="remove" class="btn btn-primary" id="addRowBtn">Add</button>';$('#altEditor-modal').find('.modal-title').html('Add Record');$('#altEditor-modal').find('.modal-body').html(data);$('#altEditor-modal').find('.modal-footer').html(btns)});$('#altEditor-modal').modal('show');$('#altEditor-modal input[0]').focus();for(var j in columnDefs){if(columnDefs[j].select2){$("#altEditor-modal").find("select#"+columnDefs[j].name).select2(columnDefs[j].select2)}}},_addRowData:function(){var that=this;var dt=this.s.dt;var rowDataArray={};$('form[name="altEditor-form"] *').filter(':input').each(function(i){rowDataArray[$(this).attr('id')]=$(this).val()});that.onAddRow(that,rowDataArray,function(data){that._addRowCallback(data)},function(data){that._errorCallback(data)})},_deleteRowCallback:function(response,status,more){$('#altEditor-modal .modal-body .alert').remove();var message='<div class="alert alert-success" role="alert">'+'<strong>Success!</strong>'+'</div>';$('#altEditor-modal .modal-body').append(message);setTimeout(function(){$('#altEditor-modal').modal('hide')},1000);this.s.dt.row({selected:!0}).remove();this.s.dt.draw();$("div#altEditor-modal").find("button#addRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#editRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#deleteRowBtn").prop('disabled',!0)},_addRowCallback:function(response,status,more){var data;if(typeof response=='object')
data=response;else data=JSON.parse(response);$('#altEditor-modal .modal-body .alert').remove();var message='<div class="alert alert-success" role="alert">'+'<strong>Success!</strong>'+'</div>';$('#altEditor-modal .modal-body').append(message);setTimeout(function(){$('#altEditor-modal').modal('hide')},1000);this.s.dt.row.add(data).draw(!1);$("div#altEditor-modal").find("button#addRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#editRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#deleteRowBtn").prop('disabled',!0)},_editRowCallback:function(response,status,more){var data;if(typeof response=='object')
data=response;else data=JSON.parse(response);$('#altEditor-modal .modal-body .alert').remove();var message='<div class="alert alert-success" role="alert">'+'<strong>Success!</strong>'+'</div>';$('#altEditor-modal .modal-body').append(message);setTimeout(function(){$('#altEditor-modal').modal('hide')},1000);this.s.dt.row({selected:!0}).data(data);this.s.dt.row({selected:!0}).deselect();this.s.dt.draw();$("div#altEditor-modal").find("button#addRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#editRowBtn").prop('disabled',!0);$("div#altEditor-modal").find("button#deleteRowBtn").prop('disabled',!0)},_errorCallback:function(response,status,more){var error=resp;$('#altEditor-modal .modal-body .alert').remove();var errstr="There was an unknown error!";if(error.responseJSON&&error.responseJSON.errors){errstr="";for(var key in error.responseJSON.errors){errstr+=error.responseJSON.errors[key][0]}}
var message='<div class="alert alert-danger" role="alert">'+'<strong>Error!</strong> '+(error.status==null?"":'Response code: '+error.status)+" "+errstr+'</div>';$('#altEditor-modal .modal-body').append(message)},onAddRow:function(dt,rowdata,success,error){console.log("Missing AJAX configuration for INSERT");success(rowdata)},onEditRow:function(dt,rowdata,success,error){console.log("Missing AJAX configuration for UPDATE");success(rowdata)},onDeleteRow:function(dt,rowdata,success,error){console.log("Missing AJAX configuration for DELETE");success(rowdata)},_inputValidation:function(){var that=this;var dt=this.s.dt;var isValid=!1;var errorcount=0;$('form[name="altEditor-form"] *').filter(':text').each(function(i){var errorLabel="#"+$(this).attr("id")+"label";$(errorLabel).hide();$(errorLabel).empty();if(!$(this).val().match($(this).attr("pattern"))){$(errorLabel).html($(this).attr("data-errorMsg"));$(errorLabel).show();errorcount++}
else if($(this).attr("data-unique")=="true"){var colData=dt.column("th:contains('"+$(this).attr("name")+"')").data();var selectedCellData=null;if(dt.row({selected:!0}).index()!=null)
selectedCellData=dt.cell(dt.row({selected:!0}).index(),dt.column("th:contains('"+$(this).attr("name")+"')").index()).data();for(var j in colData){if($(this).val()==colData[j]&&colData[j]!=selectedCellData){$(errorLabel).html($(this).attr("data-uniqueMsg"));$(errorLabel).show();errorcount++}}}});if(errorcount==0){isValid=!0}
return isValid},_quoteattr:function(s,preserveCR){preserveCR=preserveCR?'&#13;':'\n';return(''+s).replace(/&/g,'&amp;').replace(/'/g,'&apos;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\r\n/g,preserveCR).replace(/[\r\n]/g,preserveCR)},});altEditor.version='2.0';altEditor.defaults={alwaysAsk:!1,focus:null,columns:'',update:null,editor:null};altEditor.classes={btn:'btn'};$(document).on('preInit.dt.altEditor',function(e,settings,json){if(e.namespace!=='dt'){return}
var init=settings.oInit.altEditor;var defaults=DataTable.defaults.altEditor;if(init||defaults){var opts=$.extend({},init,defaults);if(init!==!1){new altEditor(settings,opts)}}});DataTable.altEditor=altEditor;return altEditor})
